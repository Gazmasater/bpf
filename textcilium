
Включите необходимые параметры ядра:

sudo sysctl -w net.core.bpf_jit_enable=1
sudo sysctl -w net.ipv4.ip_forward=1
sudo sysctl -w kernel.unprivileged_bpf_disabled=1

Установите Cilium CLI:
CLI позволит вам управлять Cilium и проверять его состояние:

CLI_VERSION=$(curl -s https://raw.githubusercontent.com/cilium/cilium-cli/main/stable.txt)
curl -L --remote-name-all https://github.com/cilium/cilium-cli/releases/download/$CLI_VERSION/cilium-linux-amd64.tar.gz{,.sha256sum}
sha256sum --check cilium-linux-amd64.tar.gz.sha256sum
sudo tar xzvfC cilium-linux-amd64.tar.gz /usr/local/bin
rm cilium-linux-amd64.tar.gz{,.sha256sum}

gaz358@gaz358-BOD-WXX9:~/myprog$ CLI_VERSION=$(curl -s https://raw.githubusercontent.com/cilium/cilium-cli/main/stable.txt)
curl -L --remote-name-all https://github.com/cilium/cilium-cli/releases/download/$CLI_VERSION/cilium-linux-amd64.tar.gz{,.sha256sum}
sha256sum --check cilium-linux-amd64.tar.gz.sha256sum
sudo tar xzvfC cilium-linux-amd64.tar.gz /usr/local/bin
rm cilium-linux-amd64.tar.gz{,.sha256sum}
Command 'curl' not found, but can be installed with:
sudo snap install curl  # version 8.1.2, or
sudo apt  install curl  # version 8.5.0-2ubuntu10.4
See 'snap info curl' for additional versions.
Command 'curl' not found, but can be installed with:
sudo snap install curl  # version 8.1.2, or
sudo apt  install curl  # version 8.5.0-2ubuntu10.4
See 'snap info curl' for additional versions.
sha256sum: cilium-linux-amd64.tar.gz.sha256sum: No such file or directory
tar (child): cilium-linux-amd64.tar.gz: Cannot open: No such file or directory
tar (child): Error is not recoverable: exiting now
tar: Child returned status 2
tar: Error is not recoverable: exiting now
rm: cannot remove 'cilium-linux-amd64.tar.gz': No such file or directory
rm: cannot remove 'cilium-linux-amd64.tar.gz.sha256sum': No such file or directory








Скачайте бинарный файл Cilium Agent
Сначала загрузите и установите последний релиз Cilium Agent:

CILIUM_VERSION=$(curl -s https://raw.githubusercontent.com/cilium/cilium/v1.11.6/stable.txt)
curl -L --output cilium-agent https://github.com/cilium/cilium/releases/download/$CILIUM_VERSION/cilium-agent
chmod +x cilium-agent
sudo mv cilium-agent /usr/local/bin/

2. Создайте папку для конфигурации
Создайте директорию для хранения конфигурационных файлов Cilium:

sudo mkdir -p /etc/cilium
Если у вас есть специфическая конфигурация, создайте или скопируйте файл конфигурации
в /etc/cilium/config.yaml. Обычно этот файл содержит настройки сети и другие параметры.

3. Создайте Unit-файл для systemd
Создайте Unit-файл для запуска Cilium как службы:

sudo nano /etc/systemd/system/cilium-agent.service

Добавьте в файл следующие строки:

[Unit]
Description=Cilium Agent
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/cilium-agent --config-dir=/etc/cilium
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target

4. Запустите и включите службу
Загрузите новый Unit-файл, затем запустите и включите Cilium Agent:

sudo systemctl daemon-reload
sudo systemctl start cilium-agent
sudo systemctl enable cilium-agent

5. Проверьте статус службы
Убедитесь, что Cilium Agent успешно запустился:

sudo systemctl status cilium-agent
