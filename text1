1.Запустите следующие команды для установки зависимостей:

sudo apt-get update && \
sudo apt-get install -y build-essential git cmake \
    zlib1g-dev libevent-dev \
    libelf-dev llvm \
    clang libc6-dev-i386 \
    netcat-openbsd nano

2. Создайте рабочую директорию
Создайте и перейдите в рабочую директорию:
mkdir ~/src && cd ~/src
git init

3. Линк asm/byteorder.h для eBPF
Создайте символическую ссылку на заголовочные файлы:

sudo ln -s /usr/include/x86_64-linux-gnu/asm/ /usr/include/asm
4. Скачайте и соберите libbpf
Клонируйте репозиторий libbpf-bootstrap и инициализируйте подмодули:

git clone https://github.com/libbpf/libbpf-bootstrap.git && \
cd libbpf-bootstrap && \
git submodule update --init --recursive
Перейдите в директорию с исходниками libbpf и соберите её как статическую библиотеку:

cd libbpf/src && \
make BUILD_STATIC_ONLY=y && \
sudo make install BUILD_STATIC_ONLY=y LIBDIR=/usr/lib/x86_64-linux-gnu/
5. Скачайте заголовки ядра для BPF
Клонируйте репозиторий с исходниками ядра и скопируйте заголовки:

cd ~/src
git clone --depth 1 git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git && \
sudo cp linux/include/uapi/linux/bpf* /usr/include/linux/

7. Скачайте и соберите bpftool
Клонируйте и соберите bpftool:

git clone --recurse-submodules https://github.com/libbpf/bpftool.git ~/src/bpftool && \
cd ~/src/bpftool/src && \
make && \
sudo make install
